"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var node_misrcon_1 = require("../node-misrcon");
/*
This command can only be used on a development server.
 */
var parseEntityDump = function (entityDumpString) {
    var splitEntString = entityDumpString.split('\n').filter(function (val, idx) {
        return idx > 1;
    }); // remove first 2
    // remove last 3
    splitEntString.pop();
    splitEntString.pop();
    splitEntString.pop();
    if (splitEntString.length === 0) {
        throw new node_misrcon_1.ParserError('Not an Entity Dump');
    }
    return splitEntString.filter(function (i) { return !i.startsWith('-'); }).map(function (line) {
        var data = line
            .split(' ')
            .filter(function (i) { return i; })
            .filter(function (i) { return !i.startsWith('-'); })
            .filter(function (i) { return i.length !== 0; });
        return {
            active: true,
            id: Number(data[0].replace(':', '')),
            pos: [Number(data[6].replace('(', '')), Number(data[7]), Number(data[8].replace(')', ''))],
            salt: Number(data[2].replace('Salt:', '')),
            type: data[3].split('[')[0]
        };
    });
};
exports.default = parseEntityDump;
//# sourceMappingURL=parseEntityDump.js.map